<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smooth Parallax Scrolling Effect</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
        }

        /* Parallax Container */
        .parallax-container {
            position: relative;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Background Image with Parallax Effect */
        .parallax-bg {
            position: absolute;
            top: -20%;
            left: 0;
            width: 100%;
            height: 120%;
            background-image: url('https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&fit=crop');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            will-change: transform;
            z-index: -1;
        }

        /* Fallback for browsers that don't support background-attachment: fixed */
        @supports not (background-attachment: fixed) {
            .parallax-bg {
                background-attachment: scroll;
            }
        }

        /* Foreground Content */
        .parallax-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            max-width: 800px;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .parallax-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .parallax-content p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        .cta-button {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Regular Content Sections */
        .content-section {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
            background: white;
        }

        .content-section h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-align: center;
            color: #333;
        }

        .content-section p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            text-align: justify;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .parallax-content h1 {
                font-size: 2.5rem;
            }
            
            .parallax-content p {
                font-size: 1rem;
            }
            
            .parallax-content {
                padding: 1.5rem;
                margin: 0 1rem;
            }
            
            .content-section {
                padding: 2rem 1rem;
            }
            
            .content-section h2 {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .parallax-content h1 {
                font-size: 2rem;
            }
            
            .parallax-bg {
                background-position: center center;
            }
        }

        /* Performance Optimizations */
        .parallax-bg {
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
        }

        /* Smooth scrolling for the entire page */
        html {
            scroll-behavior: smooth;
        }

        /* Loading state */
        .loading {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .loaded {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Parallax Hero Section -->
    <section class="parallax-container loading" id="parallax-hero">
        <div class="parallax-bg" id="parallax-bg"></div>
        <div class="parallax-content">
            <h1>Smooth Parallax Effect</h1>
            <p>Experience the beauty of parallax scrolling with optimized performance and cross-browser compatibility.</p>
            <a href="#content" class="cta-button">Explore More</a>
        </div>
    </section>

    <!-- Regular Content -->
    <section class="content-section" id="content">
        <h2>About Parallax Scrolling</h2>
        <p>Parallax scrolling is a web design technique where background images move at a slower rate than foreground content, creating an illusion of depth and immersion. This effect has become increasingly popular in modern web design due to its ability to create engaging and visually appealing user experiences.</p>
        
        <p>The implementation you're experiencing uses optimized JavaScript with requestAnimationFrame for smooth performance, throttled scroll events to prevent janky animations, and CSS transforms for hardware acceleration. The background image is set to move at 0.5x the normal scroll speed, creating that classic parallax effect.</p>
        
        <p>Key features of this implementation include responsive design that works across different screen sizes, cross-browser compatibility with fallbacks for older browsers, performance optimizations to maintain 60fps scrolling, and accessibility considerations for users who prefer reduced motion.</p>
    </section>

    <section class="content-section">
        <h2>Technical Implementation</h2>
        <p>This parallax effect is built using a combination of CSS and JavaScript. The CSS handles the basic styling and responsive design, while JavaScript manages the scroll event handling and transform calculations. The background image is positioned absolutely and scaled to 120% height to ensure smooth movement without gaps.</p>
        
        <p>Performance is optimized through several techniques: using requestAnimationFrame for smooth animations, throttling scroll events to reduce CPU usage, utilizing CSS transforms instead of changing position properties, and implementing will-change property for better browser optimization.</p>
        
        <p>The effect is fully responsive and includes fallbacks for devices that don't support certain CSS properties. Mobile devices receive optimized handling to ensure smooth performance across all platforms.</p>
    </section>

    <section class="content-section">
        <h2>Best Practices</h2>
        <p>When implementing parallax effects, it's important to consider performance implications. Always test on various devices and browsers, use hardware acceleration when possible, and provide fallbacks for older browsers. Additionally, consider accessibility by respecting user preferences for reduced motion.</p>
        
        <p>This implementation follows modern web development best practices including semantic HTML structure, progressive enhancement, mobile-first responsive design, and performance optimization techniques that ensure the effect enhances rather than hinders the user experience.</p>
    </section>

    <script>
        // Parallax Scrolling Implementation
        class ParallaxEffect {
            constructor() {
                this.parallaxBg = document.getElementById('parallax-bg');
                this.parallaxContainer = document.getElementById('parallax-hero');
                this.isScrolling = false;
                this.parallaxSpeed = 0.5;
                
                this.init();
            }

            init() {
                // Check if user prefers reduced motion
                if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                    this.parallaxSpeed = 1; // Disable parallax for accessibility
                }

                // Optimize for mobile devices
                this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                if (this.isMobile) {
                    this.parallaxSpeed = 0.8; // Reduce effect on mobile for better performance
                }

                this.bindEvents();
                this.handleScroll(); // Initial call
                
                // Show content after initialization
                this.parallaxContainer.classList.remove('loading');
                this.parallaxContainer.classList.add('loaded');
            }

            bindEvents() {
                // Throttled scroll event
                let ticking = false;
                
                window.addEventListener('scroll', () => {
                    if (!ticking) {
                        requestAnimationFrame(() => {
                            this.handleScroll();
                            ticking = false;
                        });
                        ticking = true;
                    }
                });

                // Handle resize events
                window.addEventListener('resize', this.debounce(() => {
                    this.handleScroll();
                }, 250));

                // Handle orientation change on mobile
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        this.handleScroll();
                    }, 100);
                });
            }

            handleScroll() {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const containerRect = this.parallaxContainer.getBoundingClientRect();
                const containerTop = containerRect.top + scrollTop;
                const containerHeight = containerRect.height;

                // Only apply parallax when container is in viewport
                if (containerRect.bottom >= 0 && containerRect.top <= window.innerHeight) {
                    const parallaxOffset = (scrollTop - containerTop) * this.parallaxSpeed;
                    
                    // Use transform3d for hardware acceleration
                    this.parallaxBg.style.transform = `translate3d(0, ${parallaxOffset}px, 0)`;
                }
            }

            // Utility function for debouncing
            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        }

        // Initialize parallax effect when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ParallaxEffect();
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Preload background image for better performance
        const img = new Image();
        img.src = 'https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&fit=crop';
    </script>
</body>
</html>